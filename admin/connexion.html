<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Connexion Admin - MAJAY</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../css/dashboard.css">
</head>
<body class="auth-page">

<div class="auth-container">
  <div class="auth-card">
    <h2>Connexion SuperAdmin</h2>
    <p>Un code de sÃ©curitÃ© sera envoyÃ© par email</p>

    <form id="adminForm">
      <div class="form-group">
        <label>Email administrateur</label>
        <input
          type="email"
          id="email"
          placeholder="admin@majay.com"
          required
          autofocus
        />
      </div>

      <button type="submit" class="btn-primary">
        ğŸ” Recevoir le code
      </button>
    </form>

    <p style="margin-top:20px;font-size:0.9em;color:#718096;">
      AccÃ¨s rÃ©servÃ© aux administrateurs MAJAY
    </p>
  </div>
</div>

<script type="module">
  import { adminAuth } from "../js/admin-auth.js";

  const form = document.getElementById("adminForm");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const email = document.getElementById("email").value.trim();
    if (!email) return;

    // ğŸ” Sauvegarde temporaire (utilisÃ©e par otp.html)
    localStorage.setItem("admin_otp_email", email);

    const result = await adminAuth.demanderOTP(email);

    if (!result.success) {
      alert("âŒ " + result.error);
      return;
    }

    // âœ… REDIRECTION AUTOMATIQUE
    window.location.href = "otp.html";
  });
</script>

</body>
</html>
